<ng-container *ngIf="globals$ | async as globals; else loading">
  <div class="outer-div">
    <div class="px-8 mb-12">
      <div class="title-div">
        <p class="title-p">Find our newest events here.</p>
      </div>
    </div>
  </div>
  <ng-container *ngIf="!globals?.usePretixCalendar; else pretixCalendar">
    <!-- Custom calendar -->
    <div class="max-w-screen-xl m-auto custom-calendar-p">
      <esn-custom-calendar></esn-custom-calendar>
    </div>
  </ng-container>
  <ng-template #pretixCalendar>
    <div class="max-w-screen-xl m-auto legend-p">
      <p>
      <img src="../../../assets/pretix/pretix-green.png" alt="red tile" width="20" class="inline pb-1 mr-1" />
        The event has free tickets left.
      </p>
      <p>
        <img src="../../../assets/pretix/pretix-orange.png" alt="red tile" width="20" class="inline pb-1 mr-1" />
        Join the waiting list!
      </p>
      <p>
        <img src="../../../assets/pretix/pretix-red.png" alt="red tile" width="20" class="inline pb-1 mr-1" />
        The event is sold out/already over.
      </p>
    </div>
    <!-- Pretix calendar with cookie banner -->
    <div *ngIf="!loadPretix" class="relative w-full">
      <img
        src="../../../assets/pretix/pretix-blur.png"
        alt="Blurred Pretix Calendar"
        class="w-full h-auto"
        data-testid="esn-calendar-blur"
      />
      <button
        class="absolute top-1/2 left-1/2 blue transition ease-in-out duration-150 buttontransform border px-3 py-1 rounded bg-slate-200 hover:bg-slate-50"
        (click)="setLoadPretix()"
        data-testid="esn-calendar-button"
      >
        Accept cookies & load calendar
      </button>
    </div>
    <esn-pretix-calendar *ngIf="loadPretix"></esn-pretix-calendar>
  </ng-template>
</ng-container>
<!-- Loading spinner -->
<ng-template #loading>
  <img width="200px" class="m-auto" src="assets/social/ESN-star-spinner.gif"
/></ng-template>
